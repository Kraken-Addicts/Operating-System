## 3장 컴퓨터 시스템 동작원리_1

<br>

### 3-1 :fallen_leaf: 컴퓨터 시스템의 구조　`yeosong`

보기에서 알맞은 말을 골라 빈 칸을 채우세요. 

`키보드` `마우스` `모니터` `네트워크 장치` `메모리` `디스크` `CPU` 


1. 컴퓨터 시스템의 구조는 내부 장치인 `____`, `____`, 외부장치인 `____`, `____`, `____`, `____`, `____` 등으로 구성된다.

3. 컨트롤러는 하드웨어 장치마다 존재하는 작은 CPU다. ( O / X )

2. 메모리에는 컨트롤러가 없다. ( O / X ) 

4. 커널 kernel 이 무엇인지 쓰세요. (단답형 주관식)

5. 커널에는 인터럽트 처리 루틴이 포함되어 있다. ( O / X ) 

<details>
<summary> <b> :page_facing_up: 답지 </b>  </summary>
<div markdown="1">
 
보기에서 알맞은 말을 골라 빈 칸을 채우세요. 

`키보드` `마우스` `모니터` `네트워크 장치` `메모리` `디스크` `CPU` 


1. 컴퓨터 시스템의 구조는 내부 장치인 `CPU`, `메모리`, 외부장치인 `디스크`, `키보드`, `마우스`, `모니터`, `네트워크 장치` 등으로 구성된다.

3. 컨트롤러는 하드웨어 장치마다 존재하는 작은 CPU다. ( O )

2. 메모리에는 컨트롤러가 없다. ( X ) 
> 디스크를 포함한 입출력 장치 모두와, 메모리에도 컨트롤러가 있어서 CPU와 신호를 주고 받을 수 있다.

4. 커널 kernel 이 무엇인지 쓰세요. (단답형 주관식)
> 운영체제 소프트웨어 중 핵심적인 부분에 한정되어 항상 메모리에 올라가 있는 부분이다.

5. 커널에는 인터럽트 처리 루틴이 포함되어 있다. ( O ) 

</div>
</details>
<br><br>

### 3-2 :fallen_leaf: CPU 연산과 I/O 연산	　`kukim`
1. 로컬버퍼(local buffer)이란 무엇인가요?🤔

2. "쭌"이라는 프로그램이 실행중에 디스크에서 "쓰으읍"이라는 데이터를 읽어오라는 명령을 내렸어요. 디스크 컨트롤러가 로컬버퍼를 통해 임시 공간을 만들었습니다. 뚝딱둑딱. 이때 메인 CPU는 로컬버퍼로 읽어오는 작업이 끝났는지 지속적으로 체크할까요?🤔(O / X)
 
<details>
<summary> <b> :page_facing_up: 답지 </b>  </summary>
<div markdown="1">

1. 로컬버퍼(local buffer)이란 무엇인가요 ?
  - 정답 : 입출력 장치들로 부터 들어오고 나가는 데이터를 임시로 저장하기 위한 작은 메모리 공간이에요! 각 장치의 컨트롤러가 이를 제어한답니다.


2. "쭌"이라는 프로그램이 실행중에 디스크에서 "쓰으읍"이라는 데이터를 읽어오라는 명령을 내렸어요. 디스크 컨트롤러가 로컬버퍼를 통해 임시 공간을 만들었습니다. 뚝딱둑딱. 이때 메인 CPU는 로컬버퍼로 읽어오는 작업이 끝났는지 지속적으로 체크할까요?.(O / X)
  - 정답 : X , 메인 CPU가 지속적으로 체크하는 것이 아니라 컨트롤러가 로컬버퍼로 읽어오는 작업이 끝나면 인터럽트(interrupt)를 발생시켜 CPU에 보고해요

</div>
</details>
<br><br>

### 3-3 :fallen_leaf: 인터럽트의 일반적 기능	　`gaekim`
1. 컨트롤러들이 CPU의 서비스가 필요할 때, 이를 통보하는 방법을  `____` 라고 한다.

2. 하드웨어 인터럽트가 발생하면, CPU는 하던 일을 멈추고 운영체제 커널 내에서 해당 인터럽트의 처리를 위해 정의된 코드를 찾지만, 소프트웨어 인터럽트가 발생하면, CPU는 실행 중이던 명령(Instruction)을 마저 마친 다음에 앞에 기술한 작업을 수행한다. `(O / X)`

3. `___`웨어 인터럽트는 컨트롤러 등의 `___`웨어 장치가 CPU의 인터럽트 라인을 세팅하는 반면, `___`웨어 인터럽트는 `___`웨어가 그 일을 수행한다는 차이점이 있다.

4. 소프트웨어 인터럽트는 trap이라고도 불리며, 예로는 프로그램이 오류를 범한 경우인 `______`과 프로그램이 커널 함수를 호출하는 경우인  `_______`이 있다.

5. 인터럽트 처리가 완료되면, CPU는 원래 수행하던 작업으로 돌아가 중단되었던 일을 계속해서 수행한다. `(O / X)`

<details>
<summary> <b> :page_facing_up: 답지 </b>  </summary>
<div markdown="1">

1. 컨트롤러들이 CPU의 서비스가 필요할 때, 이를 통보하는 방법을  `인터럽트(Interrupt)` 라고 한다.  
👉 덧붙여 인터럽트는 키보드 입력 혹은 요청된 디스크 입출력 작업의 완료 등 CPU에 알려줄 필요가 있는 이벤트가 일어난 경우 컨트롤러가 발생시키는 것이다.

2. 하드웨어 인터럽트가 발생하면 CPU는 하던 일을 멈추고 운영체제 커널 내에서 해당 인터럽트의 처리를 위해 정의된 코드를 찾지만, 소프트웨어 인터럽트가 발생하면 CPU는 실행 중이던 명령(Instruction)을 마저 마친 다음에 앞에 기술한 작업을 수행한다. `(X)`  
👉 소프트웨어 인터럽트, 하드웨어 인터럽트 모두 일단 인터럽트가 발생하면 CPU는 하던 일을 멈추고 운영체제에서 인터럽트를 확인한다.

3. `하드`웨어 인터럽트는 컨트롤러 등의 `하드`웨어 장치가 CPU의 인터럽트 라인을 세팅하는 반면, `소프트`웨어 인터럽트는 `소프트`웨어가 그 일을 수행한다는 차이점이 있다.

4. 소프트웨어 인터럽트는 trap이라고도 불리며, 예로는 프로그램이 오류를 범한 경우인 `예외상황(exception)`과 프로그램이 커널 함수를 호출하는 경우인  `시스템 콜(system call)`이 있다.

5. 인터럽트 처리가 완료되면 CPU는 원래 수행하던 작업으로 돌아가 중단되었던 일을 계속해서 수행한다. `(O)`  
👉 인터럽트 처리 전에 수행 중이던 작업을 저장해두며, 인터럽트 처리가 끝나면 앞의 저장해둔 데이터를 통해 원래 수행하던 작업으로 돌아가 일을 계속해서 수행한다.

</div>
</details>
<br><br>

### 3-4 :fallen_leaf: 인터럽트 핸들링　`hylee`
1. 인터럽트가 발생하면 CPU에서는 현재 처리 중이던 상태를 저장하고 인터럽트를 처리한다. 
<br>여기서 처리 중이던 상태를 저장해야되는 이유를 레지스터(register) 단어를 포함해서 답해주세요. (서술형)

2. 프로세스 제어블록(Process Control Block:PCB)은 CPU에 1개만 존재한다. ( O / X )

3. 시스템이 부팅 후 정상 상태에 머무르게 되면 운영체제가 직접 CPU를 점유하는 경우는 인터럽트에 의하지 않고는 발생하지 않는다. ( O / X )

<details>
<summary> <b> :page_facing_up: 답지 </b>  </summary>
<div markdown="1">

1. 인터럽트가 발생하면 CPU에서는 현재 처리 중이던 상태를 저장하고 인터럽트를 처리한다. 

여기서 처리 중이던 상태를 저장해야되는 이유를 레지스터(register) 단어를 포함해서 답해주세요. (서술형)

>  정답 : CPU에서 명령이 실행될 때에는 CPU 내부에 있는 임시 기억장치인 레지스터(register)에 데이터를 읽거나 쓰면서 작업을 하는데, 
이때 인터럽트가 발생해 새로운 명령을 실행하면 기존의 레지스터값들이 지워지게 되므로
CPU 내의 이러한 상태를 저장해두어야 한다. (+이게 모두 저장되어야 인터럽트 처리가 이루어질 수 있다.)


2. 프로세스 제어블록(Process Control Block:PCB)은 CPU에 1개만 존재한다. ( O / X )

> 정답 : X 

    PCB는 각각의 프로그램마다 하니찍 존재하며 해당 프로그램의 어느 부분이 실행 중이었는지를 저장하고 있다. 
    구체적으로는 프로그램이 실행 중이던 코드의 메모리 주소와 레지스터값, 하드웨어 상태 등이 저장된다.

3. 시스템이 부팅 후 정상 상태에 머무르게 되면 운영체제가 직접 CPU를 점유하는 경우는 인터럽트에 의하지 않고는 발생하지 않는다. ( O / X )

> 정답 : O

    시스템이 부팅 후 정상상태에 머무르게 되면 CPU가 항상 사용자 프로그램에 의해 사용되며,
    운영체제는 단지 인터럽트가 발생했을 때에만 잠깐 CPU의 제어권을 획득할 수 있다.
    인터럽트가 발생하지 않으면 원래 실행 중인 사용자 프로그램이 원하는 만큼 CPU를 계속 점유하게 된다.

</div>
</details>
<br><br>

### 3-5 :fallen_leaf: 입출력 구조　`yeha`

1. `__________`은(는) 어떤 프로그램이 입출력 요청을 했을 때 입출력 작업이 완료된 후에야 그 프로그램이 후속 작업을 수행할 수 있는 방식이다.

2. `__________`은(는) 입출력 연산을 요청한 후에 연산이 끝나기를 기다리는 것이 아니라 CPU의 제어권을 입출력 연산을 호출한 그 프로그램에게 곧바로 다시 부여하는 방식이다. 

3. 동기식 입출력은 입출력이 완료될 때까지 다음 명령을 수행할 수 없기 때문에 그동안 CPU와 I/O장치가 낭비된다. (O / X) 

4. 비동기식 입출력은 입출력이 완료되면 I/O 컨트롤러가 CPU에게 인터럽트를 발생시켜 입출력이 완료되었음을 알려주지 않는다. (O / X)

5. 데이터를 읽는(read) 작업은 동기식, 데이터를 쓰는(write) 작업은 비동기식으로만 진행한다. (O / X)

<details>
<summary> <b> :page_facing_up: 답지 </b>  </summary>
<div markdown="1">
 
1. (동기식 입출력)은 어떤 프로그램이 입출력 요청을 했을 때 입출력 작업이 완료된 후에야 그 프로그램이 후속 작업을 수행할 수 있는 방식이다.  
> 동기식 입출력

2. (비동기식 입출력)은 입출력 연산을 요청한 후에 연산이 끝나기를 기다리는 것이 아니라 CPU의 제어권을 입출력 연산을 호출한 그 프로그램에게 곧바로 다시 부여하는 방식이다.   
> 비동기식 입출력

    입출력을 요청한 후 프로세서에게 곧바로 CPU를 주고 요청한 입출력과 무관한 일을 한다.   
    디스크에서 뭘 읽어오라는 요청을 했을 때, 이와 상관없이 할 수 있는 작업들은 비동기식으로 처리할 수 있겠다.   

3. 동기식 입출력은 입출력이 완료될 때까지 다음 명령을 수행할 수 없기 때문에 그동안 CPU와 I/O장치가 낭비된다. 
> (O)  

    동기식 입출력의 CPU 낭비를 막기 위해 입출력을 요청한 후 다른 프로그램에게 CPU를 양도한다.  
    또한 다수의 프로그램이 동시에 입출력 연산을 요청하는 경우 동기성 (synchronization)을 보장하기 위해 장치마다 큐를 두어 요청된 순서대로 처리할 수 있도록 한다.  

4. 비동기식 입출력은 입출력이 완료되면 I/O 컨트롤러가 CPU에게 인터럽트를 발생시켜 입출력이 완료되었음을 알려주지 않는다.   
> (X)

    동기식과 마찬가지로 인터럽트를 통해 입출력 연산이 완료됨을 알린다.  
    그 시점부터 읽어온 데이터를 필요로 하는 명령을 수행할 수 있다.  

5. 데이터를 읽는(read) 작업은 동기식, 데이터를 쓰는(write) 작업은 비동기식으로만 진행한다.   
> (X)

    데이터를 쓰도록 요청, 화면에 출력 요청 등은 비동기식이 더 자연스럽다. 정말 출력이 되었는지 확인해야 한다면 동기식으로 프로그램을 구현하면 된다. (물론 CPU와 I/O장치 낭비됨)  

</div>
</details>
<br><br>

### 3-6 :fallen_leaf: DMA　`mihykim`

<p align="center"><img src="https://user-images.githubusercontent.com/60066472/95030203-040c6580-06e9-11eb-9e65-49c890f88f60.png" width="450"></p>

__1. DMA에 대해 설명해 보세요__ (양자택일, [기술면접 예상문제](https://airyym.tistory.com/entry/%EA%B8%B0%EC%88%A0-%EB%A9%B4%EC%A0%91-%EC%98%88%EC%83%81-%EC%A7%88%EB%AC%B81))

  - DMA는 `Definite Memory Account / Direct Memory Access` 라는 말 그대로 직접적으로 메모리에 접근하는 일종의 컨트롤러입니다.
  - 현대 운영체제에서는 자원의 `윤리적 / 효율적` 관리를 가장 중점적으로 둡니다.
  - 그런데 만약 입출력장치가 메모리접근을 원할 때마다 `인터셉트 / 인터럽트`를 발생시키면 CPU의 업무가 방해 받게되어 CPU 사용의 효율이 떨어지는 문제점이 발생합니다.
  - 이를 위해, CPU 외에 직접 메모리 접근이 가능한 장치인 'DMA'를 두는 것입니다.
  - 즉, DMA는 CPU가 `이태혁 장치 / 입출력 장치`들의 메모리 접근 요청에 의해 자주 인터럽트 당하는 것을 `촉진하는 / 막아주는` 역할을 합니다.
  - DMA는 `바이트 / 블록` 이라는 큰 단위로 정보를 메모리로 읽어온 후에 CPU에 인터럽트를 발생시켜서 해당 작업의 완료를 알려주어, CPU를 좀 더 효율적으로 관리하고 입출력 연산을 빠르게 수행할 수 있게 됩니다.

__※ 블록(block) 단위란?__
- '블록'은 파일시스템에서 파일이 저장되는 단위로, '섹터' 의 정수배이며, 파일시스템의 크기에 따라서 자동으로 결정되지만 사용자가 직접 결정할 수도 있음. <br>
<p align="center"><img src="https://user-images.githubusercontent.com/60066472/95030420-96f9cf80-06ea-11eb-84f1-11cd46b79005.png" width="500"></p>
<br>

__2. CPU는 DMA가 자료를 전송하는 동안 다른 프로그램을 실행할 수 있습니다. DMA가 자료를 전송하는 것이 사용자 프로그램의 실행을 방해할까요? 만일 그렇다면, 어떤 형태의 방해가 발생하는지 설명해주세요.__ (주관식, [공룡책 9th 연습문제 1.9](https://futurists.tistory.com/36))

  - 힌트 : 버스

__※ 버스(bus)란?__
- 버스는 컴퓨터 안의 부품들 간에, 또는 컴퓨터 간에 데이터와 정보를 전송하는 통로임  

<details>	
<summary> <b> :page_facing_up: 답지 </b>  </summary>	
<div markdown="1">	

__1. DMA에 대해 설명해 보세요__ (양자택일, [기술면접 예상문제](https://airyym.tistory.com/entry/%EA%B8%B0%EC%88%A0-%EB%A9%B4%EC%A0%91-%EC%98%88%EC%83%81-%EC%A7%88%EB%AC%B81))
- DMA는 `Direct Memory Access` 라는 말 그대로 직접적으로 메모리에 접근하는 일종의 컨트롤러입니다.
  - 현대 운영체제에서는 자원의 `효율적` 관리를 가장 중점적으로 둡니다.
  - 그런데 만약 입출력장치가 메모리접근을 원할 때마다 `인터럽트`를 발생시키면 CPU의 업무가 방해 받게되어 CPU 사용의 효율이 떨어지는 문제점이 발생합니다.
  - 이를 위해, CPU 외에 직접 메모리 접근이 가능한 장치인 'DMA'를 두는 것입니다.

  - 즉, DMA는 CPU가 `입출력 장치`들의 메모리 접근 요청에 의해 자주 인터럽트 당하는 것을 `막아주는` 역할을 합니다.
  - DMA는 `블록` 이라는 큰 단위로 정보를 메모리로 읽어온 후에 CPU에 인터럽트를 발생시켜서 해당 작업의 완료를 알려주어, CPU를 좀 더 효율적으로 관리하고 입출력 연산을 빠르게 수행할 수 있게 됩니다.

__2. CPU는 DMA가 자료를 전송하는 동안 다른 프로그램을 실행할 수 있습니다. DMA가 자료를 전송하는 것이 사용자 프로그램의 실행을 방해할까요? 만일 그렇다면, 어떤 형태의 방해가 발생하는지 설명해주세요.__ (주관식, [공룡책 9th 연습문제 1.9](https://futurists.tistory.com/36))

  - CPU, 장치들은 공통의 버스를 사용하고, 버스에는 전송가능한 대역폭이 있습니다. 다른 프로그램이 필요한 메모리의 연산을 하는 동시에 DMA가 같은 버스를 사용하는 상황이므로 사용자 프로그램의 속도가 느려집니다.

</div>
</details>
<br>
